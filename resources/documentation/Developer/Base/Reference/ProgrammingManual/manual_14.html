<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on December 24, 2013 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Objective-C GNUstep Base Programming Manual: F. Using the GNUstep Make Package</title>

<meta name="description" content="Objective-C GNUstep Base Programming Manual: F. Using the GNUstep Make Package">
<meta name="keywords" content="Objective-C GNUstep Base Programming Manual: F. Using the GNUstep Make Package">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Make"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="manual_13.html#User-Defaults" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Makefile-Contents" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual_13.html#Compliance-to-Standards" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="manual_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="manual_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Using-the-GNUstep-Make-Package"></a>
<h1 class="appendix">F. Using the GNUstep Make Package</h1>
<a name="index-GNUstep-Make-package"></a>
<a name="index-Make-package_002c-GNUstep"></a>

<p>Reference/doc on the GNUstep make package; mainly examples of various
types of projects.
</p>
<hr size="6">
<a name="Makefile-Contents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Make" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Makefile-Example" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Make" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Make" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="manual_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="manual_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">F.1 Makefile Contents</h2>

<p><b>Note. Type <code>man make</code> for assistance.</b>
</p>
<p>Make files comprise four key content types:
</p>
<ul>
<li>
<b>Comments</b>

<p><code>#</code> prefixes comments.
</p>
</li><li>
<b>Macros</b>

<p><code>SRC=main.m</code> assigns a macro that is implemented as:<code>gcc $(SRC)</code>
and is interpreted as: 
<code>gcc main.m</code>
</p>
</li><li>
<b>Explicit rules</b>
Explicit rules are used to indicate which files depend upon supporting files and 
the commands required for their compilation: 
<table><tr><td>&nbsp;</td><td><pre class="example">targetfile : sourcefiles
	commands           
</pre></td></tr></table>

<p>A Tab precedes each command that must be implemented on the source files in order 
to create the target file: 
</p><table><tr><td>&nbsp;</td><td><pre class="example">main: main.m List.h
	gcc -o main main.m List.h
</pre></td></tr></table>
 
</li><li>
<b>Implicit rules</b>
Implicit rules broadly echo explicit variants but do not specify commands, rather the 
extensions indicate which commands are performed:

<p><code>servertest.o: servertest.c io.h</code>
<br>
is interpreted as: 
<br>
<code>$(CC) $(CFLAGS) -c servertest.c io.h</code>
</p></li></ul>

<hr size="6">
<a name="Makefile-Example"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Makefile-Contents" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Makefile-Structure" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Make" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Makefile-Contents" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="manual_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="manual_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">F.1.1 Makefile Example</h3>

<table><tr><td>&nbsp;</td><td><pre class="example"># The following two lines force the standard make to recognize the 
# Objective-C .m suffix.

.SUFFIXES: .o .m
.m.o:
$(CC) -c $(CFLAGS) $&lt; 


# Macro declarations

CC = gcc
CFLAGS = -g
LIBS = -lobjc
SRC=main.m Truck.m Station.m Vehicle.m
OBJ=main.o Truck.o Station.o Vehicle.o


# Explicit rules

hist: $(OBJ)
	$(CC) $(CFLAGS) -o main $(OBJ) $(LIBS)


# Implicit rules

Truck.o: Truck.h Truck.m
Station.o: Truck.h Station.h Station.m
Vehicle.o: Truck.h Vehicle.h Vehicle.m
main.o: Station.h Vehicle.h

</pre></td></tr></table>


<hr size="6">
<a name="Makefile-Structure"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Makefile-Example" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Debug-and-Profile-Information" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Make" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Makefile-Contents" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="manual_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="manual_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">F.1.2 Makefile Structure</h3>

<p>The following Makefile defines a project:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#
# A GNUmakefile
#

# Check that the GNUSTEP_MAKEFILES environment variable is set
ifeq ($(GNUSTEP_MAKEFILES),)
GNUSTEP_MAKEFILES := $(shell gnustep-config --variable=GNUSTEP_MAKEFILES 2&gt;/dev/null)
 ifeq ($(GNUSTEP_MAKEFILES),)
   $(error You need to set GNUSTEP_MAKEFILES before compiling!)
 endif
endif

# Include the common variables
include $(GNUSTEP_MAKEFILES)/common.make

# Build an Objective-C program
OBJC_PROGRAM_NAME = simple

# Objective-C files requiring compilation
simple_OBJC_FILES = source.m

-include GNUmakefile.preamble

# Include in the rules for making Objective-C programs
include $(GNUSTEP_MAKEFILES)/objc.make

-include GNUmakefile.postamble
</pre></td></tr></table>


<p>To compile a package that uses the Makefile Package, type <code>make</code> in the 
top-level directory of the package. A non-GNUstep Objective-C file may be 
compiled by adding <code>-lobjc on</code> at the command line.
</p>

<hr size="6">
<a name="Debug-and-Profile-Information"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Makefile-Structure" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static_002c-Shared-and-DLLs" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Make" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Makefile-Contents" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="manual_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="manual_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">F.1.3 Debug and Profile Information</h3>


<p>By default the Makefile Package does not flag the compiler to generate debugging 
information that is generated by typing:
</p>
<p><code>make debug=yes</code>
</p>
<p>This command also causes the Makefile Package to turn off optimization. It is 
therefore necessary to override the optimization flag when running Make if both 
debugging information and optimization is required. Use the variable OPTFLAG to 
override the optimization flag. 
</p>
<p>By default the Makefile Package does not instruct the compiler to create profiling 
information that is generated by typing:
</p>
<p><code>make profile=yes</code>
<br>
</p>
<hr size="6">
<a name="Static_002c-Shared-and-DLLs"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Debug-and-Profile-Information" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Project-Types" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Make" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Makefile-Contents" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="manual_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="manual_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">F.1.4 Static, Shared and DLLs</h3>

<p>By default the Makefile Package generates a shared library if it is building a 
library project type, and it will link with shared libraries if it is building 
an application or command-line tool project type. To tell the Makefile Package 
not to build using shared libraries but using static libraries instead, type: 
</p>
<p><code>make shared=no</code>
</p>
<p>This default is only applicable on systems that support shared libraries; 
systems that do not support shared libraries will always build using static 
libraries. Some systems support DLLs that are a form of shared libraries; on 
these systems DLLs are built by default unless the Makefile Package is told to 
build using static libraries instead. 
</p>
<hr size="6">
<a name="Project-Types"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Static_002c-Shared-and-DLLs" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Make" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Make" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="manual_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="manual_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">F.2 Project Types</h2>

<p>Projects are divided into different types. To create a project of a specific 
type, a make file is specified:
</p>
<p><code>include $(GNUSTEP_MAKEFILES)/application.make</code>
</p>
<p>Each project type is independent, and if you want to create two project types in 
the same directory (e.g. a tool and a Java program), include both the desired 
make files in your main Make file. 
</p>
<ul>
<li> 
Aggregate - aggregate.make

<p>An Aggregate project holds several sub-projects that are of any valid 
project type (including the Aggregate type). The only project variable is the 
SUBPROJECTS variable:
</p>
<p><code>Aggregate project: SUBPROJECTS</code> 
</p>
<p>SUBPROJECTS defines the directory names that hold the sub-projects that the 
Aggregate project should build. 
</p>

</li><li> Graphical Applications - application.make

<p>An application is an Objective-C program that includes a GUI component, and by 
default links in all the GNUstep libraries required for GUI development, such as 
the Base and GUI libraries. 
</p>

</li><li> Bundles - bundle.make

<p>A bundle is a collection of resources and code that can be used to enhance an 
existing application or tool dynamically using the NSBundle class from the 
GNUstep base library. 
</p>

</li><li> Command Line C Tools - ctool.make

<p>A ctool is a project that uses only C language files. Otherwise it is similar to 
the ObjC project type. 
</p>

</li><li> Documentation - documentation.make

<p>The Documentation project provides rules to use various types of documentation 
such as texi and LaTeX documentation, and convert them into finished 
documentation like info, PostScript, HTML, etc. 
</p>
</li><li> Frameworks - framework.make

<p>A Framework is a collection of resources and a library that provides common code 
that can be linked into a Tool or Application. In many respects it is similar to 
a Bundle. 
</p>
</li><li> Java - java.make

<p>This project provides rules for building java programs. It also makes it easy to 
make java projects that interact with the GNUstep libraries. 
</p>
</li><li> Libraries - library.make

<p>The Makefile Package provides a project type for building libraries that may be 
static, shared, or dynamic link libraries (DLLs). The latter two variants are 
supported only on some platforms.
</p></li></ul>

<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Make" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="manual.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="manual_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="manual_15.html#Concept-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="manual_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>Adam Fedor</em> on <em>December 24, 2013</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
 </font>
 <br>

</p>
</body>
</html>
